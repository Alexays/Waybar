dist: xenial
os: linux
language: python

python: 3.6

addons:
    apt:
        sources:
            - ubuntu-toolchain-r-test
            - debian-sid
        packages:
            - gcc-7
            - g++-7
            - libinput10
            - libinput-dev
            - wayland-protocols
            - libwayland-client0
            - libwayland-cursor0
            - libwayland-bin
            - libwayland-dev

matrix:
    include:
        - env: CC=gcc-7 CXX=g++-7
        - env: CC=clang CXX=clang++

before_install:
    - git clone https://github.com/swaywm/wlroots subprojects/wlroots

install:
    - wget https://github.com/ninja-build/ninja/releases/download/v1.8.2/ninja-linux.zip
    - mkdir -p "$HOME/.local/bin"
    - unzip ninja-linux.zip -d ${HOME}/.local/bin
    - export PATH="$HOME/.local/bin:$PATH"
    - pip install meson

before_script:
    - mkdir build

script:
    - meson build
    - ninja -C build